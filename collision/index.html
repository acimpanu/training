<!DOCTYPE HTML>
<html>
    <head>
        <style>
         
        </style>
    </head>

<body>
    <script>
        var A = {x: 50, y: 50, w: 100, h: 200};
        var B = {x: 70, y: 200, w: 100, h: 230};

       /*if((A.x + A.w) >= B.x && A.x <= B.x + B.w && A.y + A.h >= B.y && A.y <= B.y + B.h){
           console.log('There is a colision on squares');
       } else {
           console.log('Clear');
       }*/

       var C = {x: 250, y: 250, w: 200};
       var D = {x: 270, y: 270, w: 300};

       /*var distanta = Math.sqrt(Math.pow(C.x - D.x,2) + Math.pow(C.y - D.y,2));
       if (distanta <= C.w/2 + D.w/2) {
           console.log('There is a colision on circles');
       } else {
           console.log('Clear');
       }*/


       function drawSquare(x, y, w, h) {
           var patrat = document.createElement("div");
           patrat.style.left = x + "px";
           patrat.style.top = y + "px";
           patrat.style.width = w + "px";
           patrat.style.height = h + "px";
           patrat.style.border = "1px solid black"
           patrat.style.position = "absolute";
           document.body.appendChild(patrat);
           return patrat;
       }

    //    drawSquare(50, 50, 100, 200);
    //    drawSquare(70, 200, 100, 230);

     

    //    drawCircle(250, 250, 200);
    //    drawCircle(270, 270, 300);

       

       /* Here begins squares collision */

       var firstS = drawSquare(50, 50, 100, 200);

       var moveX = document.body.clientWidth/5;
       var moveY = document.body.clientHeight/2;

       var myObj = drawSquare(moveX, moveY, 100, 150);
       myObj.addEventListener("mousedown", startMoving);

       function startMoving(e) {
            moveX = e.clientX - myObj.getBoundingClientRect().left;
            moveY = e.clientY - myObj.getBoundingClientRect().top;

            moveAt(e.pageX, e.pageY);

            function moveAt(pageX, pageY) {
                myObj.style.left = pageX - moveX + 'px';
                myObj.style.top = pageY - moveY + 'px';         
            }

            function mouseMove(e) {
                moveAt(e.pageX, e.pageY);
                checkSquaresCollision();
            }

            function mouseUp(e) {
                document.removeEventListener('mousemove', mouseMove);
                document.removeEventListener('mouseup', mouseUp);
            }

            document.addEventListener('mousemove', mouseMove);
            document.addEventListener('mouseup', mouseUp);

            return myObj;
        }

        function checkSquaresCollision() {
            
            if(firstS.offsetLeft + firstS.offsetWidth >= myObj.offsetLeft && firstS.offsetLeft <= myObj.offsetLeft + myObj.offsetWidth && firstS.offsetTop + firstS.offsetHeight >= myObj.offsetTop && firstS.offsetTop <= myObj.offsetTop + myObj.offsetHeight){
                firstS.style.background = "yellow";
            } else {
                firstS.style.background = "transparent";
            }
        }

        //checkSquaresCollision();

       /* Here begins circles collision */
       var r1 = 50;
       var r2 = 100;

       var firstC = drawCircle(450, 120, r1);

       var myCircle = drawCircle(moveX, moveY, r2);
       myCircle.addEventListener("mousedown", startMovingCircle);

       function startMovingCircle(e) {
            moveX = e.clientX - myCircle.getBoundingClientRect().left;
            moveY = e.clientY - myCircle.getBoundingClientRect().top;

            moveAt(e.pageX, e.pageY);

            function moveAt(pageX, pageY) {
                myCircle.style.left = pageX - moveX + 'px';
                myCircle.style.top = pageY - moveY + 'px';         
            }

            function mouseMove(e) {
                moveAt(e.pageX, e.pageY);
                checkCirclesCollision();
            }

            function mouseUp(e) {
                document.removeEventListener('mousemove', mouseMove);
                document.removeEventListener('mouseup', mouseUp);
            }

            document.addEventListener('mousemove', mouseMove);
            document.addEventListener('mouseup', mouseUp);

            return myCircle;
        }

          function drawCircle(x,y,r) {
           var cerc = document.createElement("div");
           cerc.style.left = x + "px";
           cerc.style.top = y + "px";
           cerc.style.border = "1px solid black";
           cerc.style.position = "absolute";
           cerc.style.width = cerc.style.height = r*2 + "px";
           cerc.style.borderRadius = "50%";
           document.body.appendChild(cerc);
           return cerc;
       }

       // checkCirclesCollision()

        function checkCirclesCollision() {
            var distanta = Math.sqrt(Math.pow(((myCircle.offsetLeft + r2) - (firstC.offsetLeft + r1)), 2) + Math.pow(((myCircle.offsetTop + r2) - (firstC.offsetTop + r1)), 2));
            if (distanta <= r1 + r2) {
                firstC.style.backgroundColor = "yellow";
            } else {
                firstC.style.backgroundColor = "transparent";
            }
        }
        
    </script>
</body>
</html>